<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>To：最后的信</title>
  <style>
    :root{
      --bg:#f5ebdc;
      --text:#1e1e1e;
      --card:#ffffffd9;
      --accent:#6b5b53;
      --fadeDuration: 2000ms;
      --delayStep: 2500ms;
    }
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg) url('https://www.transparenttextures.com/patterns/paper-fibers.png');
      color:var(--text);
      font-family: "FangSong", "STFangSong", "Noto Serif SC", "Songti SC", "PingFang SC", serif;
      display:grid;
      place-items:center;
    }
    .wrap{
      width:min(820px, 92vw);
      background:var(--card);
      backdrop-filter: blur(2px);
      border-radius:24px;
      box-shadow:0 10px 30px rgba(0,0,0,.08);
      padding:36px 28px 28px;
      line-height:1.9;
      position:relative;
    }
    h1{
      margin:0 0 8px;
      font-size:28px;
      text-align:center;
      letter-spacing:.06em;
      color:var(--accent);
    }
    p{ margin:14px 0; font-size:18px; opacity:0; transform: translateY(8px); transition: opacity var(--fadeDuration) ease, transform var(--fadeDuration) ease; }
    p.show{opacity:1; transform:none}
    .footer{margin-top:18px; text-align:right; color:#6f655f}
    .controls{display:flex; gap:8px; justify-content:center; margin:12px 0 8px}
    .btn{ border:1px solid #d7cfc8; background:#fff; color:#5b534e; padding:8px 12px; border-radius:999px; cursor:pointer; font-size:14px; }
    .btn:hover{background:#f7f2ee}
    .pagenav{display:flex; justify-content:center; gap:10px; margin-top:10px}
    .page-footer{ position:absolute; bottom:8px; right:16px; font-size:12px; color:#9a8f88; }
    .page-date{ position:absolute; bottom:8px; left:16px; font-size:12px; color:#9a8f88; }
    .audio-toggle{ position:absolute; top:10px; right:12px; z-index:5; }
    .hint{ position:fixed; left:50%; bottom:24px; transform:translateX(-50%); background:#fff; color:#5b534e; border:1px solid #d7cfc8; padding:10px 14px; border-radius:999px; box-shadow:0 6px 18px rgba(0,0,0,.08); display:none; }
    .pulse{ animation:pulse 1.4s ease-in-out infinite; }
    @keyframes pulse{ 0%{box-shadow:0 0 0 0 rgba(107,91,83,.35)} 70%{box-shadow:0 0 0 14px rgba(107,91,83,0)} 100%{box-shadow:0 0 0 0 rgba(107,91,83,0)} }
  </style>
</head>
<body>
  <audio id="bgm" src="ScreenRecording.m4a" autoplay loop muted preload="auto" playsinline></audio>

  <main class="wrap">
    <button class="btn audio-toggle" id="audioBtn">🔊 正在播放</button>
    <h1>To：最后的信</h1>

    <div class="controls">
      <button class="btn" id="play">开始淡入</button>
      <button class="btn" id="reset">重置</button>
    </div>

    <article id="letter">
      <!-- 第 1 页 -->
      <p>或许你还没有醒</p>
      <p>我想了很久还是决定把这最后一封信写给你</p>
      <p>如果说这几天你把对我的沉默和冷淡</p>
      <p>视作你最后的倔强和名为尊严的战场</p>
      <p>你已经赢下这场战役</p>

      <p class="sep">⸻</p>

      <!-- 第 2 页 -->
      <p>这些天我一直在等你的信息</p>
      <p>我不停的告诉你自己</p>
      <p>你不是那样冷漠的人</p>
      <p>你和曾经那些冷暴力我的朋友不一样</p>

      <p>因为等不到你</p>
      <p>昨晚鼓起勇气走到你的直播间</p>

      <p class="sep">⸻</p>

      <!-- 第 3 页 -->
      <p>你知道我还在生病</p>
      <p>却漠不关心</p>
      <p>以及在直播间视我的留言为空气</p>
      <p>已经给了我再清楚不过的答案</p>

      <p>你的直播间不再需要我</p>
      <p>你的内心也不再需要我的支持</p>
      <p>你的冷漠和视我为透明</p>
      <p>和那些曾经霸凌过我，冷暴力我的人没什么两样</p>

      <p class="sep">⸻</p>

      <!-- 第 4 页 -->
      <p>我终究失去了那个曾经的你</p>
      <p>那个说过要陪我走到毕业的你</p>
      <p>说我到了沈阳时，要告诉我旅行攻略的</p>
      <p>说担心我在职场上会受到欺负的</p>
      <p>说相信我是最棒的</p>
      <p>告诉我上台不用害怕的你</p>
      <p>那个轻声为我唱起月光</p>
      <p>那个曾陪我聊到天亮的</p>
      <p>那个真诚的 我最最信任的</p>
      <p>可以推心置腹的你</p>

      <p class="sep">⸻</p>

      <!-- 第 5 页 -->
      <p>那天，你在直播间说要唱一首为你写诗</p>
      <p>因为是花生和鹿鹿的小红书百天</p>
      <p>你知道么，我飞往布拉格的那一天</p>
      <p>9月1日</p>
      <p>也是我们的小红书百天</p>
      <p>在我去往布拉格的时候</p>
      <p>精神恍惚 差一点丢掉钱包和护照</p>
      <p>在多哈转机的那一夜</p>
      <p>被随机分到了偏僻的小旅馆</p>
      <p>我很害怕 害怕到哭</p>
      <p>那时候也在等你的信息</p>
      <p>耳边想起的是你的声音和月光</p>
      <p>想打语音给你</p>
      <p>想听到你告诉我不要怕</p>

      <p class="sep">⸻</p>

      <!-- 第 6 页（已按你的文本改写） -->
      <p>我知道前些日子你的生活也经历了一些变动</p>
      <p>我听得到你在直播间的声音</p>
      <p>也听得到你的疲惫 你的不快乐 你的强颜欢笑</p>
      <p>尽管我曾尝试着想和你聊聊 替你分解心中的烦恼</p>
      <p>想告诉你，</p>
      <p>如果累了 就休息几天吧</p>
      <p>想把我拍到的，没有许愿池的布拉格广场</p>
      <p>和周杰伦MV的取景地布拉格堡，分享给你</p>
      <p>想告诉你，在布拉格的第一天晚上，</p>
      <p>因为喝了伏特加酒，我身体过敏</p>
      <p>满大街找药店买药的滑稽事</p>
      <p>想告诉你，我其实给你准备了纪念品，你的，还有鹿鹿的</p>
      <p>还有那张海报，围绕他发生的搞笑故事</p>
      <p>但你关上了那扇门 不愿意对我敞开心扉</p>
      <p>现在，我想你其实并不需要</p>

      <p class="sep">⸻</p>

      <!-- 第 7 页 -->
      <p>或许前些日子和你断交让你内心也受到了伤害</p>
      <p>或许那段时间你也是需要我的</p>
      <p>不过没关系</p>
      <p>你没有和我说过断交 也没有取关</p>
      <p>但你这些天对我的冷处理已经达到了同样的效果</p>

      <p class="sep">⸻</p>

      <!-- 第 8 页 -->
      <p>昨夜，</p>
      <p>我迷迷糊糊的回到了五月初的某个夏夜</p>
      <p>梦里在和你，鹿鹿，oio 还有几个现在不常来的朋友一起峡谷组局</p>
      <p>梦里听见你对我说上号，</p>
      <p>“不是从小红书上，是在王者房间号”</p>
      <p>然后我笑着笑着醒了</p>
      <p>醒着醒着哭了</p>

      <p class="sep">⸻</p>

      <!-- 第 9 页 -->
      <p>还有六月里的某个晚上</p>
      <p>播了好多首老歌</p>
      <p>都是大家听过的</p>
      <p>梦里，我好像听到了那首&lt;偏爱&gt;</p>
      <p>我说，</p>
      <p>“这个直播间就像是时光机 主播是掌管这个时光机器的老头”</p>
      <p>日后每次你说自己是老头</p>
      <p>我总以为可以回到那时的人和事</p>

      <p class="sep">⸻</p>

      <!-- 第 10 页 -->
      <p>但是我忘了</p>
      <p>世界上根本没有时光机这回事</p>
      <p>那个直播间</p>
      <p>曾经我快乐的源泉</p>
      <p>已经回不去</p>

      <p class="sep">⸻</p>

      <!-- 第 11 页 -->
      <p>这并不是我第一次给你写信</p>
      <p>但我想 一定是最后一次了吧</p>
      <p>至少我可以说，</p>
      <p>我对你</p>
      <p>至始至终，都坦诚相对</p>

      <p class="sep">⸻</p>

      <!-- 第 12 页 -->
      <p>我将会体面的离开</p>
      <p>不会留下任何遗憾和痕迹</p>

      <p>或许将来</p>
      <p>你还可以对别人说</p>
      <p>是我自己选择的</p>
      <p>没错</p>
      <p>离开你和你的直播间</p>
      <p>是你想象不到的沉重与痛苦的选择</p>
      <p>但是你促成了我的选择</p>

      <p class="sep">⸻</p>

      <!-- 第 13 页 -->
      <p>若是你心愿</p>
      <p>已遂，祝好</p>
    </article>

    <div class="pagenav">
      <button class="btn" id="prevPage">上一页</button>
      <button class="btn" id="nextPage">下一页</button>
    </div>

    <div class="page-footer" id="pageNum">第 1 页</div>
    <div class="page-date">2025-08-10</div>
  </main>
  <div class="hint" id="audioHint">🔔 点击开启背景音乐</div>

  <script>
    // 音乐淡入
    const bgm = document.getElementById('bgm');
    const audioBtn = document.getElementById('audioBtn');
    const audioHint = document.getElementById('audioHint');
    function setAudioBtnPlaying(isPlaying){
      audioBtn.textContent = isPlaying ? '🔊 正在播放' : '🔇 已暂停';
      audioBtn.classList.toggle('pulse', !isPlaying);
    }
    const FADE_MS = 2000;
    function fadeInAudio(audio, ms = FADE_MS) {
      audio.volume = 0; audio.muted = true;
      const start = performance.now();
      return audio.play().then(() => {
        audio.muted = false;
        function step(now) {
          const t = Math.min(1, (now - start) / ms);
          audio.volume = t;
          if (t < 1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      });
    }
    async function tryPlay(){
      try{ await fadeInAudio(bgm, FADE_MS); setAudioBtnPlaying(true); audioHint.style.display = 'none'; }
      catch{ setAudioBtnPlaying(false); audioHint.style.display = 'block'; }
    }
    audioBtn.addEventListener('click', async ()=>{ if(bgm.paused){ await tryPlay(); } else { bgm.pause(); setAudioBtnPlaying(false); }});
    audioHint.addEventListener('click', tryPlay);
    window.addEventListener('DOMContentLoaded', tryPlay);

    // 分页渲染
    const article = document.getElementById('letter');
    const allNodes = Array.from(article.children);
    const pages = [[]];
    allNodes.forEach(node=>{
      if(node.classList && node.classList.contains('sep')){ pages.push([]); }
      else{ pages[pages.length-1].push(node); }
    });

    let currentPage = 0;
    function renderPage(idx){
      currentPage = Math.max(0, Math.min(idx, pages.length-1));
      article.innerHTML = '';
      pages[currentPage].forEach(n=>{
        const clone = n.cloneNode(true);
        clone.classList.remove('show');
        article.appendChild(clone);
      });
      document.getElementById('pageNum').textContent = `第 ${currentPage+1} 页 / 共 ${pages.length} 页`;
      document.getElementById('prevPage').style.display = (currentPage===0)?'none':'inline-flex';
      const nextBtn = document.getElementById('nextPage');
      nextBtn.textContent = (currentPage===pages.length-1)?'回到开头':'下一页';
      playSequential();
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function playSequential(){
      const paras = Array.from(document.querySelectorAll('#letter p'));
      paras.forEach((p,i)=>{
        p.classList.remove('show');
        const delay = i * parseInt(getComputedStyle(document.documentElement).getPropertyValue('--delayStep'));
        setTimeout(()=>p.classList.add('show'), delay);
      });
    }
    function resetAll(){
      const paras = Array.from(document.querySelectorAll('#letter p'));
      paras.forEach(p=>p.classList.remove('show'));
      window.scrollTo({top:0, behavior:'smooth'});
    }

    document.getElementById('play').addEventListener('click', playSequential);
    document.getElementById('reset').addEventListener('click', resetAll);
    document.getElementById('prevPage').addEventListener('click', ()=>renderPage(currentPage-1));
    document.getElementById('nextPage').addEventListener('click', ()=>{ if(currentPage===pages.length-1){ renderPage(0); } else { renderPage(currentPage+1); } });

    // 初始渲染
    renderPage(0);
  </script>
</body>
</html>
